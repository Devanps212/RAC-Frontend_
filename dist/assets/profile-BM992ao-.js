import{j as e,f as a,a8 as g,a9 as f,i as p,r as m,e as P,aj as F,bb as b,bc as E,B as c,b1 as A}from"./index-DNzXuL2B.js";import{c as k,a as v,e as S,u as D}from"./index.esm-BjoxmLA4.js";import{f as I,u as y}from"./adminAuthentication-CDe9IMLy.js";const w={_id:"",name:"",email:"",profilePic:"",mobile:0},B=k().shape({name:v(),email:v().email("Invalid email format"),mobile:S().typeError("Please provide a valid number").integer("Please provide a valid integer number").positive("Mobile number must be positive").test("maxDigits","Mobile number must not exceed 10 digits",l=>typeof l>"u"?!1:l.toString().length<=10)}),N=(l,r)=>D({initialValues:{...w,...r},validationSchema:B,onSubmit:l}),M=({adminDetails:l,handleSubmit:r,handleFileChange:h})=>{const i=N(r,l);return e.jsxs(a,{onSubmit:i.handleSubmit,children:[e.jsxs(g,{className:"mt-2",children:[e.jsx(f,{children:e.jsxs(a.Group,{controlId:"formName",children:[e.jsx(a.Label,{children:"Name:"}),e.jsx(a.Control,{type:"text",name:"name",value:i.values.name,onChange:i.handleChange,onBlur:i.handleBlur,isInvalid:i.touched.name&&!!i.errors.name}),e.jsx(a.Control.Feedback,{type:"invalid",children:i.errors.name})]})}),e.jsx(f,{children:e.jsxs(a.Group,{controlId:"formEmail",children:[e.jsx(a.Label,{children:"Email:"}),e.jsx(a.Control,{type:"email",name:"email",value:i.values.email,onChange:i.handleChange,onBlur:i.handleBlur,isInvalid:i.touched.email&&!!i.errors.email}),e.jsx(a.Control.Feedback,{type:"invalid",children:i.errors.email})]})})]}),e.jsx(g,{className:"mt-3",children:e.jsx(f,{children:e.jsxs(a.Group,{controlId:"formMobile",children:[e.jsx(a.Label,{children:"Mobile:"}),e.jsx(a.Control,{type:"text",name:"mobile",value:i.values.mobile,onChange:i.handleChange,onBlur:i.handleBlur,isInvalid:i.touched.mobile&&!!i.errors.mobile}),e.jsx(a.Control.Feedback,{type:"invalid",children:i.errors.mobile})]})})}),e.jsx(p,{className:"admin-profile-button",type:"submit",children:"Submit"})]})},$=()=>{const[l,r]=m.useState(!1),h=P(t=>t.adminToken.adminToken)??"",d=F(h).payload,[s,u]=m.useState({_id:d,name:"",email:"",profilePic:"",mobile:0});m.useEffect(()=>{(async()=>{try{const o=await I(d);u(o)}catch(o){c.error(o.message)}})()},[d]);const x=async(t,{setSubmitting:o})=>{try{const n=await y(t);u(n),r(!1),c.success("Admin profile updated successfully")}catch(n){c.error(n.message)}finally{o(!1)}},j=async t=>{if(t.target.files&&t.target.files[0])try{if(!s.name){c.warning("Please update the profile details before updating the profile picture.");return}const n=new FormData;n.append("_id",d),n.append("name",s.name),n.append("profilePic",t.target.files[0]);for(var o of n.entries())console.log(o[0]+", "+o[1]);console.log("FormData:",n);const C=await y(n);u(C),c.success("Profile picture updated successfully")}catch(n){c.error(n.message)}};return m.useEffect(()=>{console.log(s)},[s]),N(x,s),e.jsx("div",{className:"container-fluid admin-profile",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-5 col-12",children:e.jsxs("div",{className:"left-content-list d-flex flex-column justify-content-center align-items-center position-relative",children:[e.jsxs("div",{className:"profile-pic position-relative",children:[s.profilePic?typeof s.profilePic=="string"?e.jsx("img",{src:s.profilePic,alt:"admin profile"}):e.jsx(b,{className:"add-profile-pic",size:200}):e.jsx(b,{className:"add-profile-pic",size:200}),e.jsx("input",{type:"file",id:"profilePicUpload",accept:"image/*",style:{display:"none"},onChange:j}),e.jsx("label",{htmlFor:"profilePicUpload",className:"upload-icon",children:e.jsx(E,{size:30})})]}),e.jsxs("div",{className:"admin-basic-info",children:[e.jsx("strong",{children:s.name}),e.jsx("p",{children:s.email})]})]})}),e.jsx("div",{className:"col-md-7 col-12",children:e.jsxs("div",{className:"right-content-list d-flex flex-column justify-content-center align-items-center",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsx(p,{className:`admin-profile-button ${l?"":"active"}`,onClick:()=>r(!1),children:"Detail"}),e.jsx(p,{className:`admin-profile-button ${l?"active":""}`,onClick:()=>r(!0),children:"Edit"})]}),e.jsx("div",{className:"admin-details",children:l?e.jsx(M,{adminDetails:s,handleSubmit:x,handleFileChange:j}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile:"})," ",s.mobile]})]})})]})})]})})},G=()=>e.jsx(A,{children:e.jsx($,{})});export{G as default};
