import{a as b,ab as v,r as t,j as e,F as N,f as O,B as P}from"./index-DfbGy7Wr.js";import{o as y}from"./userAuthentication-CG6S21Ho.js";const T=()=>{const m=b(),{userEmail:n,userId:x}=v()??"",[o,u]=t.useState(""),[p,l]=t.useState(null),[c,h]=t.useState(""),[r,i]=t.useState(60),g=n?atob(n):"";t.useEffect(()=>{const s=sessionStorage.getItem("userOtp");return l(s),()=>{sessionStorage.removeItem("userOtp")}},[]),t.useEffect(()=>{const s=setInterval(()=>{i(a=>a>0?a-1:0)},1e3);return()=>{clearInterval(s),r===0&&l(null)}},[r]);const d=async()=>{try{console.log(n);const s=await y(g,"FPOTP");console.log("otp got : ",s.OTP),s.OTP&&(l(s.OTP),sessionStorage.setItem("userOtp",s.OTP))}catch(s){console.error("Error generating OTP:",s.message),P.error(s.message)}},f=()=>{i(60),d()};t.useEffect(()=>{d()},[]);const j=async s=>{s.preventDefault();let a=!0;(!o||o!==p)&&(a=!1,h("Please enter a valid OTP")),a&&m(`/resetPassword/${n}/${x}`)};return e.jsx("div",{className:"container-fluid fpotp-Backg",children:e.jsx("div",{className:"row justify-content-center align-items-center min-vh-100 bg-gray-200 py-5 pt-5",children:e.jsx("div",{className:"col-md-8",style:{backgroundColor:"#fff"},children:e.jsxs("div",{className:"row shadow",style:{marginRight:"-24px"},children:[e.jsxs("div",{className:"col-md-6 rounded-l-md bg-white p-4",style:{maxWidth:"450px"},children:[e.jsx("h1",{className:"text-xl font-semibold",children:"OTP verification"}),e.jsx("div",{className:"text-center",children:e.jsx("small",{className:"text-dark-400",children:"Enter OTP below"})}),e.jsxs("form",{className:"mt-4",onSubmit:j,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(N,{controlId:"floatingInput",label:"OTP",className:"mb-3",children:e.jsx(O.Control,{type:"text",value:o,style:{height:"69px"},className:`form-control rounded-md border ${c?"border-danger":"border-gray-300"} focus:border-purple-700 focus:outline-none focus:ring-1 focus:ring-purple-700 py-1 px-1.5 text-gray-500`,placeholder:"Enter your OTP",onChange:s=>u(s.target.value)})}),c&&e.jsx("p",{className:"text-danger text-xs mt-2",children:c})]}),r>0?e.jsxs("p",{className:"text-center text-danger",children:["OTP Valid till: ",r," seconds"]}):e.jsx("p",{className:"text-center text-success",children:"OTP Timeout"}),r===0&&e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:"Didn't get any OTP?"}),e.jsx("a",{href:"#",className:"text-xs font-semibold text-purple-700",onClick:f,children:"Resend OTP"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"buttonSub",type:"submit",children:"Submit"})}),e.jsx("br",{})]})]}),e.jsxs("div",{className:"banner col-md-6 rounded-r-md position-relative",children:[e.jsx("img",{className:"h-100 object-cover rounded-r-md",src:"/assets/admin/FPOTP/kahl-orr-ZdLFPE0AZBU-unsplash.jpg",alt:"Login banner",style:{objectFit:"cover",width:"109%"}}),e.jsx("div",{className:"position-absolute top-0 start-50 translate-middle-x",children:e.jsx("p",{className:"quote text-center py-3",children:"Chase Your Vision"})})]})]})})})})},w=()=>e.jsx(T,{});export{w as default};
