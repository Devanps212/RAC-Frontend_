import{j as s,r,e as z,a as O,n as E,S as t,o as f,p as N,q as P,O as R,T as k,b as C,M as j,v as W,w as H,x as M,B as q,U as V}from"./index-BRpdrMOU.js";import{F as Y}from"./footer-CHE7SPyC.js";const G=({images:e,handleClick:g})=>{const[a,o]=e,x=d=>{console.log("index : ",d);const c=o[d];console.log("smallToBig : ",c),console.log("bigImg ; ",a),g(c,a)};return s.jsxs(s.Fragment,{children:[s.jsx("img",{src:a||"small_car_image_3.jpg",alt:"Big Car Image",className:"img-thumbnail mb-2",style:{width:"100%"}}),s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:o&&o.length>0&&o.map((d,c)=>s.jsx("div",{className:"col",children:s.jsx("img",{src:d,alt:`Small Car Image ${c}`,onClick:()=>x(c),className:"img-thumbnail mb-2",style:{width:"100%",height:"100%"}})},c))})]})},J=()=>{const[e,g]=r.useState(null),[a,o]=r.useState(null),[x,d]=r.useState(null),[c,v]=r.useState(""),[p,y]=r.useState([]),[S,D]=r.useState(!0),w=z(l=>l.token.token)??"",[T,b]=r.useState(!1);O();const A=E(),[F,U]=r.useState([]),I=new URLSearchParams(A.search),u=I.get("carId")??"",B=Array(5).fill(0),m="bottom",L=I.get("bookingDetail");console.log("booking detail : ",L),r.useEffect(()=>{u&&(async()=>{try{const n=await W(w).payload,h=await H(n);o(h.data);const i=await M(u,"user");console.log("response recieved : ",i),g(i),d(i.category),U(i.comments),v(i.thumbnailImg);const $=[...i.exterior,...i.interior];y($),D(!1)}catch(n){q.error(n.message)}})()},[u,w]),r.useEffect(()=>{console.log("cars : ",e)},[e]);const _=(l,n)=>{const h=p.findIndex(i=>i===l);if(h!==-1){v(l);const i=[...p];i[h]=n,y(i)}};return s.jsxs(s.Fragment,{children:[S?s.jsxs("div",{className:"container",style:{paddingTop:"7rem"},children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-2",children:s.jsxs("div",{className:"row d-flex flex-column justify-content-start align-items-start",children:[s.jsx("div",{className:"col tags",children:s.jsx(t,{height:30})}),s.jsx("div",{className:"col tags",children:s.jsx(t,{height:30})}),s.jsx("div",{className:"col tags",children:s.jsx(t,{height:30})}),s.jsx("div",{className:"col tags",children:s.jsx(t,{height:30})})]})}),s.jsx("div",{className:"col-6",children:s.jsx(t,{height:400})}),s.jsxs("div",{className:"col-4 d-flex flex-column justify-content-start align-items-start",children:[s.jsx(t,{height:30,width:200}),s.jsx("div",{className:"specs mx-0 py-0",children:s.jsxs("ul",{className:"list-unstyled pt-3",style:{textAlign:"start",paddingLeft:"0"},children:[s.jsx("li",{children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"Detail-List",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"Detail-List",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"Detail-List",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"Detail-List",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"Detail-List",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"Detail-List",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"mb-4",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"RPW",children:s.jsx(t,{height:20,width:100})}),s.jsx("li",{className:"RPD",children:s.jsx(t,{height:20,width:100})})]})}),s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:s.jsx(t,{height:40,width:120})})]})]}),s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-6 detailed-specs mb-4 mt-5",children:[s.jsx(t,{height:30,width:200}),s.jsx(t,{count:3})]}),s.jsxs("div",{className:"col-5 d-flex flex-column mb-5 mt-5 ms-2",children:[s.jsx(t,{height:30,width:200}),s.jsx(t,{count:2})]})]})]}):s.jsxs("div",{className:"container",style:{paddingTop:"7rem"},children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-2",children:s.jsxs("div",{className:"row d-flex flex-column justify-content-start align-items-start",children:[s.jsx("div",{className:"col tags",children:s.jsx("p",{children:"24/7 Service"})}),s.jsx("div",{className:"col tags",children:s.jsx("p",{children:"Flexible Rental Plans"})}),s.jsx("div",{className:"col tags",children:s.jsx("p",{children:"Wide Selection of Cars"})}),s.jsx("div",{className:"col tags",children:s.jsx("p",{children:"Online Booking"})})]})}),s.jsx("div",{className:"col-6",children:s.jsx(G,{images:[c,p],handleClick:_})}),s.jsxs("div",{className:"col-4 d-flex flex-column justify-content-start align-items-start",children:[s.jsx("h2",{children:e==null?void 0:e.name}),s.jsx("div",{className:"specs mx-0 py-0",children:s.jsxs("ul",{className:"list-unstyled pt-3",style:{textAlign:"start",paddingLeft:"0"},children:[s.jsx("li",{children:s.jsx("div",{className:"star-rating mb-4",children:e&&e.rating!==void 0&&B.map((l,n)=>s.jsx("span",{children:n<Number(e.rating)?s.jsx(f,{}):s.jsx(N,{})},n))})}),s.jsxs("li",{className:"Detail-List",children:["Engine: ",s.jsx("strong",{children:e==null?void 0:e.engine})]}),s.jsxs("li",{className:"Detail-List",children:["Fuel: ",s.jsx("strong",{children:e==null?void 0:e.fuelType})]}),s.jsxs("li",{className:"Detail-List",children:["Seats: ",s.jsx("strong",{children:"5"})]}),s.jsxs("li",{className:"Detail-List",children:["Transmission:",s.jsx("strong",{children:e==null?void 0:e.transmission})]}),e&&e.owner&&e.owner==="Admin"?s.jsxs("li",{className:"Detail-List",children:["Owner: ",s.jsx("strong",{children:"RAC(Company)"})]}):s.jsxs("li",{className:"Detail-List",children:["Owner: ",s.jsx("strong",{children:"Partner(Third Party)"})]}),s.jsxs("li",{className:"Detail-List",children:["Category: ",s.jsx("strong",{children:x==null?void 0:x.name})]}),s.jsxs("li",{className:"mb-4",children:["Mileage :",s.jsxs("strong",{children:[e==null?void 0:e.mileage," km/hr"]})]}),s.jsxs("li",{className:"RPW",children:["Rent/Week :",s.jsxs("strong",{children:["₹ ",e==null?void 0:e.rentPricePerWeek]})]}),s.jsxs("li",{className:"RPD",children:["Rent/Day :",s.jsxs("strong",{children:["₹ ",e==null?void 0:e.rentPricePerDay]})]})]})}),s.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[a&&a.refund&&a.refund.length===0?s.jsxs("button",{className:"position-relative negotiate me-3",style:{zIndex:1},children:[s.jsx(P,{className:"position-absolute top-50 start-50 translate-middle",style:{transform:"translate(-50%, -50%)"}}),s.jsx("span",{className:"position-relative",style:{filter:"blur(1.5px)",zIndex:2},children:"Negotiate"})]}):e&&e.owner==="Admin"?s.jsx(R,{placement:m,overlay:s.jsx(k,{id:`tooltip-${m}`,children:"Car owned by Admin. Chat not available."}),children:s.jsxs("button",{className:"position-relative negotiate me-3",style:{zIndex:1},children:[s.jsx(P,{className:"position-absolute top-50 start-50 translate-middle",style:{transform:"translate(-50%, -50%)"}}),s.jsx("span",{className:"position-relative",style:{filter:"blur(1.5px)",zIndex:2},children:"Chat"})]})},m):s.jsx(s.Fragment,{children:a&&a.refund&&a.refund.length===0?s.jsx(R,{placement:m,overlay:s.jsx(k,{id:`tooltip-${m}`,children:"Please rent a car first to access Chat."}),children:s.jsx("button",{className:"negotiate me-3",style:{zIndex:1},children:s.jsx("span",{className:"position-relative",children:"Chat"})})},m):s.jsx(C,{to:`/negotiate/${a==null?void 0:a._id}/${e==null?void 0:e.addedById}/${e==null?void 0:e._id}`,style:{textDecoration:"none"},children:s.jsx("button",{className:"negotiate me-3",style:{zIndex:1},children:s.jsx("span",{className:"position-relative",children:"Negotiate"})})})}),s.jsx(C,{to:`/bookingUI?carId=${e==null?void 0:e._id}&bookingDetail=${L}`,children:s.jsx("button",{className:"book-now",children:"Book now"})})]})]})]}),s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-6 detailed-specs mb-4 mt-5",children:[s.jsx("h2",{children:"Description"}),s.jsx("p",{style:{textAlign:"justify"},children:e==null?void 0:e.description})]}),s.jsxs("div",{className:"col-5 d-flex flex-column mb-5 mt-5 ms-2",children:[s.jsx("h2",{children:e&&e.comments&&e.comments.length>0?"Reviews":"No Reviews"}),e&&e.comments&&e.comments.length>0?e.comments.slice(0,2).map((l,n)=>s.jsxs("div",{className:"review-wrapper mt-2 mb-2",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[l.userId.profilePic?s.jsx("img",{src:typeof l.userId.profilePic=="string"?l.userId.profilePic:URL.createObjectURL(l.userId.profilePic),alt:"Profile",style:{borderRadius:"10px",width:"8%"}}):s.jsx("img",{src:"https://via.placeholder.com/150",alt:"Profile",style:{borderRadius:"10px",width:"10%"}}),s.jsxs("div",{className:"col",children:[s.jsx("h5",{style:{marginLeft:"10px"},children:l.userId.name}),s.jsx("strong",{style:{marginLeft:"10px"},children:Array.from({length:5},(h,i)=>s.jsx("span",{children:i<l.userRating?s.jsx(f,{style:{color:"black"}}):s.jsx(N,{})},i))})]})]}),s.jsx("div",{className:"col",children:s.jsx("p",{style:{textAlign:"justify"},children:l.comment})})]},n)):s.jsx("div",{className:"d-flex flex-column justify-content-center align-items-center",children:s.jsx("img",{src:"https://res.cloudinary.com/dlkrxem40/image/upload/v1714048543/Assets/Icons/no-speak_y1prfb.png",alt:"No Reviews",style:{width:"35%",marginTop:"12px"}})}),e&&e.comments&&e.comments.length>0&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"2rem"},children:s.jsx("button",{className:"hover-border-7 text-decoration-none",onClick:()=>b(!0),children:"View All Reviews"})})]})]})]}),s.jsxs(j,{show:T,onHide:()=>b(!1),size:"lg",children:[s.jsx(j.Header,{closeButton:!0,children:s.jsx(j.Title,{children:"Reviews"})}),s.jsx(j.Body,{style:{maxHeight:"60vh",overflowY:"auto"},children:F.map((l,n)=>s.jsx("div",{className:"review-wrapper mt-2 mb-2",children:s.jsxs("div",{className:"d-flex align-items-center",children:[l.userId.profilePic?s.jsx("img",{src:typeof l.userId.profilePic=="string"?l.userId.profilePic:URL.createObjectURL(l.userId.profilePic),alt:"Profile",style:{borderRadius:"10px",width:"4%"}}):s.jsx("img",{src:"https://via.placeholder.com/150",alt:"Profile",style:{borderRadius:"10px",width:"10%"}}),s.jsxs("div",{className:"col",children:[s.jsx("h5",{style:{marginLeft:"10px"},children:l.userId.name}),s.jsx("strong",{className:"star-rating-item",style:{marginLeft:"10px"},children:Array.from({length:5},(h,i)=>s.jsx("span",{children:i<l.userRating?s.jsx(f,{style:{color:"black"}}):s.jsx(N,{})},i))}),s.jsx("br",{}),s.jsx("strong",{style:{marginLeft:"10px"},children:l.comment})]})]})},n))})]})]})},X=()=>s.jsxs(s.Fragment,{children:[s.jsx(V,{}),s.jsx(J,{}),s.jsx(Y,{})]});export{X as default};
